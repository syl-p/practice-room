<section data-controller="hello">
  <header class="flex justify-between items-end mb-6 space-x-3">
    <h2 class="text-xl font-medium">Les derniers publiés</h2>
    <%= form_with(url: search_exercises_path) do |form| %>
      <% if @categories.present? %>
        <ul class="flex space-x-3 font-medium text-gray-900">
          <% @categories.each do |category| %>
            <li>
              <label>
                <%= form.check_box :category_ids, {
                  multiple: true,
                  data: {action: "change->hello#search"},
                  checked: @category.present? && @category.id == category.id,
                  class: "hidden peer"
                },
                                    category.id,
                                    false %>
                <span class="p-2 cursor-pointer peer-checked:font-bold peer-checked:border-b-4 peer-checked:border-indigo-600"><%= category.name %></span>
              </label>
            </li>
          <% end %>
        </ul>
      <% end %>
    <% end %>
      <p>
        <%= turbo_frame_tag "search_results_count", target: "search_results_count" do %>
          <%= "Nous avons trouvé #{@exercises.count} résultats." if @exercises.present? %>
        <% end %>
      </p>
  </header>

  <!-- Turbo load comments list + Skeleton -->
  <%= turbo_frame_tag "exercises_list", src: search_exercises_path, loading: :lazy do %>
    <%= render partial: "exercises/versions/list_skeleton" %>
  <% end %>

  <%
=begin
  data-turbo-frame: "exercise_show"
%>
 <div id="exercise_sidebar"
    data-application-target="sidebar"
    data-transition-enter="ease-in-out duration-500"
    data-transition-enter-start="opacity-0"
    data-transition-enter-end="opacity-100"
    data-transition-leave="ease-in-out duration-500"
    data-transition-leave-start="opacity-100"
    data-transition-leave-end="opacity-0"
    class="hidden fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity">
    <aside
      class="hidden fixed right-0 inset-y-0 flex h-screen justify-center items-center sm:min-w-[50%] pl-10"
      data-transition-enter="transform transition ease-in-out duration-500"
      data-transition-enter-start="translate-x-full"
      data-transition-enter-end="translate-x-0"
      data-transition-leave="transform transition ease-in-out duration-500"
      data-transition-leave-start="translate-x-0"
      data-transition-leave-end="translate-x-full">
      <div class="flex overflow-y-scroll flex-col w-full h-full bg-white">
        <%= turbo_frame_tag "exercise_show" do %>
          <%= yield %>
        <% end %>
      </div>
    </aside>
  </div>
<%
=end%>
</section>
