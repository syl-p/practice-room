<%
active = active if local_assigns[:active].nil?
%>
<%
  links = [
    {
      label: "Contenu",
      active: active == "content",
      path: exercise.persisted? ? edit_exercise_path(exercise) : new_exercise_path
    },
    {
      label: "Ressources",
      active: active == "media",
      path: exercise.persisted? ? edit_exercise_path(exercise, step: "media") : ""
    },
    {
      label: "Versions",
      active: active == "versions",
      path: exercise.persisted? ? edit_exercise_path(exercise, step: "versions") : ""
    },
    {
      label: "VisibilitÃ©",
      active: active == "visibility",
      path: exercise.persisted? ? edit_exercise_path(exercise, step: "visibility") : ""
    }
  ]
%>

<nav class="flex justify-center" aria-label="Progress">
  <ol role="list" class="space-y-6">
    <!-- Current: "bg-gray-100 text-gray-900", Default: "text-gray-600 hover:bg-gray-50 hover:text-gray-900" -->
    <% links.each do |link| %>
      <li>
        <%= link_to link[:path], class: "group" do %>
          <div class="flex items-start">
            <% if link[:active] %>
              <span class="flex relative flex-shrink-0 justify-center items-center w-5 h-5" aria-hidden="true">
                <span class="absolute w-4 h-4 rounded-full bg-light"></span>
                <span class="block relative w-2 h-2 bg-indigo-600 rounded-full"></span>
              </span>
            <% elsif exercise.persisted? %>
              <span class="flex items-start">
                <svg class="w-full h-full text-indigo-600 group-hover:text-indigo-800" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
                </svg>
              </span>
            <% else %>
              <div class="flex items-start">
                <div class="flex relative flex-shrink-0 justify-center items-center w-5 h-5" aria-hidden="true">
                  <div class="w-2 h-2 bg-gray-300 rounded-full group-hover:bg-gray-400"></div>
                </div>
              </div>
            <% end %>
            <p class="ml-3 text-sm font-medium text-gray-500 group-hover:text-gray-900"> <%= link[:label] %> </p>
          </div>
        <% end %>
      </li>
    <% end %>
  </ol>
</nav>
