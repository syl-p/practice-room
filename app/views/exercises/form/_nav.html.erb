<%
  links = [
    {
      label: "Présentation",
      active: active == "presentation",
      path: exercise.persisted? ? edit_with_step_exercises_path(exercise, step: "presentation") : new_exercise_path
    },
    {
      label: "Contenu",
      active: active == "content",
      path: exercise.persisted? ? edit_exercise_path(exercise, step: "content") : "javascript:;"
    },
    {
      label: "Pratique",
      active: active == "practice",
      path: exercise.persisted? ? edit_with_step_exercises_path(exercise, step: "practice") : "javascript:;"
    },
    {
      label: "Ressources",
      active: active == "media",
      path: exercise.persisted? ? edit_exercise_path(exercise, step: "media") : "javascript:;"
    },
    {
      label: "Versions",
      active: active == "versions",
      path: exercise.persisted? ? edit_exercise_path(exercise, step: "versions") : "javascript:;"
    },
    {
      label: "Visibilité",
      active: active == "visibility",
      path: exercise.persisted? ? edit_exercise_path(exercise, step: "visibility") : "javascript:;"
    }
  ]
%>

<nav>
  <ol role="list" class="space-y-6">
    <% links.each do |link| %>
      <li>
        <%= link_to link[:path], class: "group" do %>
          <div class="flex items-start">
            <% if link[:active] %>
              <span class="flex relative flex-shrink-0 justify-center items-center w-5 h-5">
                <span class="absolute w-4 h-4 rounded-full bg-light"></span>
                <span class="block relative w-2 h-2 bg-indigo-600 rounded-full"></span>
              </span>
              <p class="ml-3 text-sm font-medium text-gray-500 group-hover:text-gray-900">
                <%= link[:label] %>
              </p>
            <% elsif exercise.persisted? %>
              <span class="flex relative flex-shrink-0 justify-center items-center w-5 h-5">
                <span class="absolute w-4 h-4 rounded-full bg-light"></span>
                <span class="block relative w-2 h-2 bg-gray-500 rounded-full"></span>
              </span>
              <p class="ml-3 text-sm font-medium text-gray-500 group-hover:text-gray-900">
                <%= link[:label] %>
              </p>
          <% else %>
              <div class="flex items-start">
                <div class="flex relative flex-shrink-0 justify-center items-center w-5 h-5">
                  <div class="w-2 h-2 bg-gray-300 rounded-full"></div>
                </div>
              </div>
              <p class="ml-3 text-sm font-medium text-gray-200">
                <%= link[:label] %>
              </p>
          <% end %>
          </div>
        <% end %>
      </li>
    <% end %>
  </ol>
</nav>
